/* =========================================
   MEDIA ARCHIVE: FINAL FULL VERSION
   ========================================= */

.media-archive-section {
    background-color: #050508;
    position: relative;
    padding: 50px 0;
    overflow: hidden;
    border-top: 1px solid rgba(57, 255, 20, 0.1);
    
    /* Туманности */
    background-image: 
        radial-gradient(circle at 10% 20%, rgba(57, 255, 20, 0.04) 0%, transparent 40%),
        radial-gradient(circle at 90% 80%, rgba(255, 45, 149, 0.04) 0%, transparent 40%);
}

/* --- КОСМИЧЕСКИЙ ФОН (ЗВЕЗДЫ) --- */
.media-archive-section::before,
.media-archive-section::after {
    content: '';
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none; /* Важно: чтобы клики проходили к карточкам */
    z-index: 0;
}

.media-archive-section::before {
    background-image: 
        radial-gradient(white 1px, transparent 1px),
        radial-gradient(rgba(255, 255, 255, 0.3) 1px, transparent 1px);
    background-size: 550px 550px, 350px 350px;
    opacity: 0.4;
    animation: donate-stars 120s linear infinite;
}

.media-archive-section::after {
    background-image: 
        radial-gradient(white 2px, transparent 2px),
        radial-gradient(rgba(255, 255, 255, 0.6) 1px, transparent 1px);
    background-size: 400px 400px, 250px 250px;
    opacity: 0.2;
    animation: donate-stars 180s linear infinite reverse;
}

@keyframes donate-stars {
    from { background-position: 0 0, 0 0; }
    to { background-position: 600px 600px, -400px 800px; }
}

.media-archive-section .container {
    position: relative;
    z-index: 5;
    max-width: 1650px;
}

/* =========================================
   HEADER (TABS & SORTING)
   ========================================= */
.archive-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 25px;
}

.header-control-bar {
    display: flex;
    align-items: center;
    gap: 15px;
    background: rgba(0, 0, 0, 0.7);
    padding: 6px 15px;
    border-radius: 50px;
    border: 1px solid rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    position: relative;
    z-index: 10;
}

.type-switcher {
    display: flex;
    position: relative;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 40px;
    padding: 3px;
}

.switcher-btn {
    position: relative;
    z-index: 2;
    background: transparent;
    border: none;
    color: #888;
    padding: 8px 22px;
    font-family: 'Orbitron', sans-serif;
    font-size: 0.9rem;
    font-weight: 700;
    cursor: pointer;
    transition: 0.3s;
    display: flex; align-items: center; gap: 8px;
}

.switcher-btn.active { color: #000; }

.type-switcher::before {
    content: '';
    position: absolute;
    top: 3px; bottom: 3px; left: 3px;
    width: calc(50% - 3px);
    background: var(--neon-green);
    border-radius: 30px;
    z-index: 1;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 0 10px rgba(57, 255, 20, 0.4);
}

.type-switcher.movies-active::before { transform: translateX(100%); }

.sort-side-btn {
    background: transparent;
    border: none;
    color: #666;
    padding: 5px 10px;
    cursor: pointer;
    font-family: 'Rajdhani', sans-serif;
    font-weight: 600;
    font-size: 0.85rem;
    display: flex; align-items: center; gap: 6px;
    transition: 0.3s;
}

.sort-side-btn:hover { color: #fff; }
.sort-side-btn.active { color: var(--neon-green); }

/* Анимация иконки сортировки (Flip) */
.sort-icon {
    display: inline-block;
    transition: transform 0.15s ease-in, opacity 0.15s ease-in;
    backface-visibility: hidden;
}
.sort-icon.flipping {
    transform: rotateX(90deg) scale(0.8);
    opacity: 0.5;
}

/* =========================================
   CONTROLS (SEARCH & FILTERS)
   ========================================= */
.archive-controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    margin-bottom: 30px;
    position: relative;
    z-index: 10;
}

.search-module {
    position: relative;
    width: 100%;
    max-width: 450px;
}

.search-icon {
    position: absolute; left: 15px; top: 50%; transform: translateY(-50%);
    color: #555;
}

.search-module input {
    width: 100%; padding: 10px 15px 10px 40px;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 50px;
    color: #fff; text-align: center;
    font-family: 'Exo 2';
    transition: 0.3s;
}
.search-module input:focus { border-color: var(--neon-green); background: rgba(0,0,0,0.5); }

.filters-wrapper {
    display: flex; flex-direction: column; align-items: center; gap: 10px;
}

.filter-row {
    display: flex; flex-wrap: wrap; justify-content: center; gap: 10px;
}

/* --- СТИЛИЗАЦИЯ ТЕГОВ (ЯРКИЕ) --- */
.filter-chip {
    padding: 6px 16px;
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px; color: #888; cursor: pointer;
    font-size: 0.75rem; text-transform: uppercase;
    background: rgba(0,0,0,0.4);
    transition: all 0.3s ease;
    font-weight: 700;
}
.filter-chip:hover { transform: translateY(-2px); border-color: #fff; color: #fff; }

/* "ВСЕ" (Розовый) */
.filter-chip[data-filter="all"] { border-color: rgba(255, 45, 149, 0.3); color: var(--neon-pink); }
.filter-chip[data-filter="all"].active { background: var(--neon-pink); color: #fff; border-color: var(--neon-pink); box-shadow: 0 0 15px rgba(255, 45, 149, 0.5); }

/* Пройдено (Зеленый) */
.status-completed, .status-watched { border-color: rgba(57, 255, 20, 0.3); color: var(--neon-green); }
.filter-chip.status-completed.active, 
.filter-chip.status-watched.active { background: var(--neon-green); color: #000; border-color: var(--neon-green); box-shadow: 0 0 15px rgba(57, 255, 20, 0.5); }

/* В процессе (Синий) */
.status-playing, .status-watching { border-color: rgba(0, 123, 255, 0.3); color: #007bff; }
.filter-chip.status-playing.active, 
.filter-chip.status-watching.active { background: #007bff; color: #fff; border-color: #007bff; box-shadow: 0 0 15px rgba(0, 123, 255, 0.5); }

/* Под вопросом (Желтый) */
.status-on-hold { border-color: rgba(255, 215, 0, 0.3); color: #ffd700; }
.filter-chip.status-on-hold.active { background: #ffd700; color: #000; border-color: #ffd700; box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); }

/* Брошено (Красный) */
.status-dropped { border-color: rgba(255, 68, 68, 0.3); color: #ff4444; }
.filter-chip.status-dropped.active { background: #ff4444; color: #fff; border-color: #ff4444; box-shadow: 0 0 15px rgba(255, 68, 68, 0.5); }

/* Жанры */
.genre-row .filter-chip { border-color: rgba(255, 255, 255, 0.05); color: #666; font-weight: 600; padding: 5px 12px; }
.genre-row .filter-chip.active { background: #333; color: #fff; border-color: #777; }


/* =========================================
   GRID & CARDS
   ========================================= */
.archive-full-grid-wrapper { width: 100%; position: relative; z-index: 5; }

.archive-grid {
    display: grid;
    /* Строго 6 колонок */
    grid-template-columns: repeat(6, 1fr);
    gap: 20px;
    padding-bottom: 40px;
}

/* --- АНИМАЦИЯ ПОЯВЛЕНИЯ КАРТОЧЕК --- */
@keyframes card-load {
    0% { opacity: 0; transform: translateY(20px) scale(0.95); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

.archive-card.animate-entry {
    opacity: 0; 
    animation: card-load 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}

/* --- КАРТОЧКА --- */
.archive-card {
    background: rgba(15, 15, 20, 0.85);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 12px;
    overflow: hidden;
    position: relative;
    transition: transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
    display: flex; flex-direction: column;
    height: 100%;
    z-index: 1;
}

.archive-card:hover {
    transform: translateY(-8px);
    z-index: 10;
}

/* Подсветка границ при наведении */
.archive-card[data-status="completed"]:hover, .archive-card[data-status="watched"]:hover { 
    border-color: var(--neon-green); box-shadow: 0 0 20px rgba(57, 255, 20, 0.2); 
}
.archive-card[data-status="playing"]:hover, .archive-card[data-status="watching"]:hover { 
    border-color: #007bff; box-shadow: 0 0 20px rgba(0, 123, 255, 0.2); 
}
.archive-card[data-status="on-hold"]:hover { 
    border-color: #ffd700; box-shadow: 0 0 20px rgba(255, 215, 0, 0.2); 
}
.archive-card[data-status="dropped"]:hover { 
    border-color: #ff4444; box-shadow: 0 0 20px rgba(255, 68, 68, 0.2); 
}

/* Линии снизу */
.archive-card::after { 
    content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; z-index: 5; 
    transition: 0.3s;
}
.archive-card[data-status="completed"]::after, .archive-card[data-status="watched"]::after { background: var(--neon-green); }
.archive-card[data-status="playing"]::after, .archive-card[data-status="watching"]::after { background: #007bff; }
.archive-card[data-status="on-hold"]::after { background: #ffd700; }
.archive-card[data-status="dropped"]::after { background: #ff4444; }

.archive-card:hover::after { height: 6px; filter: brightness(1.2); }

/* Контент карточки */
.card-thumb-container { position: relative; width: 100%; aspect-ratio: 2/3; overflow: hidden; background: #000; }
.card-thumb { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
.archive-card:hover .card-thumb { transform: scale(1.08); }

.card-rating-badge {
    position: absolute; top: 10px; right: 10px;
    background: rgba(0,0,0,0.85); color: #ffd700;
    padding: 3px 7px; border-radius: 4px; font-size: 0.75rem;
    border: 1px solid rgba(255,215,0,0.2); font-weight: bold;
    backdrop-filter: blur(5px);
}

.card-info { padding: 12px; flex-grow: 1; display: flex; flex-direction: column; }
.card-title { font-family: 'Rajdhani', sans-serif; color: #fff; font-size: 0.95rem; font-weight: 700; margin-bottom: 5px; line-height: 1.2; }
.card-genres { margin-bottom: 6px; }
.genre-tag { font-size: 0.55rem; color: #777; background: rgba(255,255,255,0.05); padding: 2px 5px; border-radius: 3px; margin-right: 2px; text-transform: uppercase; }
.card-desc { font-size: 0.75rem; color: #555; line-height: 1.3; margin-top: auto; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

/* АДАПТИВНОСТЬ */
@media (max-width: 1600px) { .archive-grid { grid-template-columns: repeat(5, 1fr); } }
@media (max-width: 1400px) { .archive-grid { grid-template-columns: repeat(4, 1fr); } }
@media (max-width: 1000px) { .archive-grid { grid-template-columns: repeat(3, 1fr); } }
@media (max-width: 768px) {
    .archive-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; }
    .header-control-bar { flex-wrap: wrap; justify-content: center; border-radius: 20px; }
    .type-switcher { order: 1; width: 100%; justify-content: center; }
    .sort-side-btn { order: 2; flex-grow: 1; justify-content: center; }
    .type-switcher::before { width: calc(50% - 6px); }
    .card-desc { display: none; }
}